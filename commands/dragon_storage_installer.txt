/summon minecraft:falling_block 0 100 0 {BlockState:{Name:"minecraft:redstone_block"},Time:1,Passengers:[{id:"minecraft:falling_block",BlockState:{Name:"minecraft:activator_rail"},Time:1,Passengers:[{id:"minecraft:command_block_minecart",Command:"scoreboard objectives add zd_tick dummy"},{id:"minecraft:command_block_minecart",Command:"scoreboard players set #t zd_tick 0"},{id:"minecraft:command_block_minecart",Command:"data modify storage zdash:data samples set value []"},{id:"minecraft:command_block_minecart",Command:"data modify storage zdash:data cur set value {x:0,y:0,z:0,gt:0L}"},{id:"minecraft:command_block_minecart",Command:"setblock 0 100 0 minecraft:repeating_command_block[facing=east]{auto:1b,Command:\"scoreboard players add #t zd_tick 1\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 1 100 0 minecraft:chain_command_block[facing=east]{auto:1b,Command:\"execute if score #t zd_tick matches 10.. if entity @e[type=minecraft:ender_dragon,limit=1] store result storage zdash:data cur.x int 1000 run data get entity @e[type=minecraft:ender_dragon,limit=1] Pos[0] 1\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 2 100 0 minecraft:chain_command_block[facing=east]{auto:1b,Command:\"execute if score #t zd_tick matches 10.. if entity @e[type=minecraft:ender_dragon,limit=1] store result storage zdash:data cur.y int 1000 run data get entity @e[type=minecraft:ender_dragon,limit=1] Pos[1] 1\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 3 100 0 minecraft:chain_command_block[facing=east]{auto:1b,Command:\"execute if score #t zd_tick matches 10.. if entity @e[type=minecraft:ender_dragon,limit=1] store result storage zdash:data cur.z int 1000 run data get entity @e[type=minecraft:ender_dragon,limit=1] Pos[2] 1\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 4 100 0 minecraft:chain_command_block[facing=east]{auto:1b,Command:\"execute if score #t zd_tick matches 10.. store result storage zdash:data cur.gt long 1 run time query gametime\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 5 100 0 minecraft:chain_command_block[facing=east]{auto:1b,Command:\"execute if score #t zd_tick matches 10.. if entity @e[type=minecraft:ender_dragon,limit=1] run data modify storage zdash:data samples append from storage zdash:data cur\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 6 100 0 minecraft:chain_command_block[facing=east]{auto:1b,Command:\"execute if score #t zd_tick matches 10.. run scoreboard players set #t zd_tick 0\"}"},{id:"minecraft:command_block_minecart",Command:"setblock 0 101 0 minecraft:air"},{id:"minecraft:command_block_minecart",Command:"kill @e[type=minecraft:command_block_minecart,distance=..3]"}]}]}
